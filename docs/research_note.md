# í•œêµ­ ìŒì‹ AI ì—ì´ì „íŠ¸ ì—°êµ¬ì¼ì§€

> **ì‘ì„±ì¼**: 2026-01-30
> **í”„ë¡œì íŠ¸ëª…**: Korean Food Agent
> **ë²„ì „**: 0.1.0

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ëª©ì 
ì‚¬ìš©ìê°€ ìŒì‹ ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ê±°ë‚˜ í…ìŠ¤íŠ¸ë¡œ ì§ˆë¬¸í•˜ë©´, AIê°€ ìŒì‹ì„ ì¸ì‹í•˜ê³  ì‹ë‹¹ ì •ë³´, ë ˆì‹œí”¼, ì˜ì–‘ì •ë³´ ë“±ì„ ì œê³µí•˜ëŠ” **ë©€í‹°ëª¨ë‹¬ ëŒ€í™”í˜• ì—ì´ì „íŠ¸** ì‹œìŠ¤í…œ êµ¬ì¶•.

### 1.2 ì£¼ìš” ê¸°ëŠ¥
| ê¸°ëŠ¥ | ì„¤ëª… | ì‚¬ìš© ë„êµ¬ |
|------|------|-----------|
| ìŒì‹ ì´ë¯¸ì§€ ì¸ì‹ | Google Lens APIë¡œ ìŒì‹/ì‹ë‹¹ íŒŒì•… | `search_food_by_image` |
| ì‹ë‹¹ ê²€ìƒ‰ | ì¹´ì¹´ì˜¤ë§µ APIë¡œ ì‹ë‹¹ ì •ë³´ ë° ë©”ë‰´ ì¡°íšŒ | `search_restaurant_info` |
| ë ˆì‹œí”¼ ê²€ìƒ‰ | ë§Œê°œì˜ë ˆì‹œí”¼ ë“±ì—ì„œ í¬ë¡¤ë§ | `search_recipe_online` |
| í›„ê¸° ë¶„ì„ | ì¹´ì¹´ì˜¤ë§µ í›„ê¸° í¬ë¡¤ë§ ë° ìš”ì•½ | `get_restaurant_reviews` |
| ì˜ì–‘ì •ë³´ | ì¹¼ë¡œë¦¬, ë‹¨ë°±ì§ˆ ë“± ì˜ì–‘ì„±ë¶„ ê²€ìƒ‰ | `get_nutrition_info` |
| ì´ë¯¸ì§€ ìˆ˜ì§‘ | ìƒˆ ìŒì‹ ì´ë¯¸ì§€ Supabase DB ì €ì¥ | `save_food_image` |
| ê²€ì¦ ì—…ë°ì´íŠ¸ | ì‚¬ìš©ì í™•ì¸ ì •ë³´ DB ì—…ë°ì´íŠ¸ | `update_food_image` |

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì „ì²´ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend (Next.js)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  ChatInput  â”‚  â”‚ ChatMessage  â”‚  â”‚   MapEmbed    â”‚              â”‚
â”‚  â”‚  (ì´ë¯¸ì§€+í…ìŠ¤íŠ¸) â”‚  â”‚ (Markdown)   â”‚  â”‚  (ì¹´ì¹´ì˜¤ë§µ)   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ HTTP/SSE (POST /chat/stream)
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend (FastAPI)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    api/main.py                               â”‚   â”‚
â”‚  â”‚  - POST /chat (ë™ê¸°)                                         â”‚   â”‚
â”‚  â”‚  - POST /chat/stream (SSE ìŠ¤íŠ¸ë¦¬ë°)                          â”‚   â”‚
â”‚  â”‚  - ì„¸ì…˜ ê´€ë¦¬ (agents dict)                                   â”‚   â”‚
â”‚  â”‚  - Base64 ì´ë¯¸ì§€ â†’ ì„ì‹œ íŒŒì¼ ë³€í™˜                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LangGraph Agent (src/agent.py)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  create_react_agent()                                        â”‚   â”‚
â”‚  â”‚  - Gemini 3 Flash Preview LLM                               â”‚   â”‚
â”‚  â”‚  - MemorySaver (ëŒ€í™” íˆìŠ¤í† ë¦¬)                                â”‚   â”‚
â”‚  â”‚  - System Prompt (ë„êµ¬ ì‚¬ìš© ê°€ì´ë“œ)                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚                                    â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚            â–¼                   â–¼                   â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚    Tools (7)    â”‚ â”‚   Services (2)  â”‚ â”‚     DB (1)      â”‚      â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚      â”‚
â”‚  â”‚ â€¢ image.py      â”‚ â”‚ â€¢ serper.py     â”‚ â”‚ â€¢ client.py     â”‚      â”‚
â”‚  â”‚ â€¢ restaurant.py â”‚ â”‚   (Google Lens) â”‚ â”‚   (Supabase)    â”‚      â”‚
â”‚  â”‚ â€¢ recipe.py     â”‚ â”‚                 â”‚ â”‚                 â”‚      â”‚
â”‚  â”‚ â€¢ nutrition.py  â”‚ â”‚ â€¢ kakao.py      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”‚ â€¢ save_image.py â”‚ â”‚   (ì¹´ì¹´ì˜¤ë§µ API) â”‚                          â”‚
â”‚  â”‚ â€¢ update_image  â”‚ â”‚   (Playwright)  â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì™¸ë¶€ API    â”‚      â”‚   í¬ë¡¤ë§      â”‚      â”‚  ë°ì´í„°ë² ì´ìŠ¤ â”‚
â”‚              â”‚      â”‚              â”‚      â”‚              â”‚
â”‚ â€¢ SerpAPI    â”‚      â”‚ â€¢ Playwright â”‚      â”‚ â€¢ Supabase   â”‚
â”‚ â€¢ Serper     â”‚      â”‚   (ë©”ë‰´/í›„ê¸°) â”‚      â”‚  (PostgreSQL)â”‚
â”‚ â€¢ Kakao API  â”‚      â”‚ â€¢ requests   â”‚      â”‚              â”‚
â”‚ â€¢ Gemini API â”‚      â”‚   (ë ˆì‹œí”¼)   â”‚      â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ê¸°ìˆ  ìŠ¤íƒ
| ë ˆì´ì–´ | ê¸°ìˆ  | ë²„ì „/ìƒì„¸ |
|--------|------|-----------|
| **LLM** | Gemini 3 Flash Preview | `gemini-3-flash-preview` |
| **ì—ì´ì „íŠ¸** | LangGraph | `create_react_agent` |
| **ë„êµ¬ ì •ì˜** | LangChain | `@tool` ë°ì½”ë ˆì´í„° |
| **ë©”ëª¨ë¦¬** | LangGraph MemorySaver | ì„¸ì…˜ë³„ ëŒ€í™” íˆìŠ¤í† ë¦¬ |
| **ë°±ì—”ë“œ** | FastAPI + Uvicorn | ë™ê¸°/ìŠ¤íŠ¸ë¦¬ë° API |
| **í”„ë¡ íŠ¸ì—”ë“œ** | Next.js 14 + Tailwind CSS | React ê¸°ë°˜ UI |
| **ì§€ë„** | ì¹´ì¹´ì˜¤ë§µ SDK | JavaScript SDK |
| **ë°ì´í„°ë² ì´ìŠ¤** | Supabase (PostgreSQL) | ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° |
| **í¬ë¡¤ë§** | Playwright | Headless Chrome |

### 2.3 ì™¸ë¶€ API
| API | ìš©ë„ | ë¹„ìš© |
|-----|------|------|
| SerpAPI | Google Lens ì´ë¯¸ì§€ ê²€ìƒ‰ | ìœ ë£Œ (ì›” 100íšŒ ë¬´ë£Œ) |
| Serper API | í…ìŠ¤íŠ¸ ê²€ìƒ‰ | ìœ ë£Œ (ì›” 2,500íšŒ ë¬´ë£Œ) |
| Kakao Map API | ì‹ë‹¹ ê²€ìƒ‰ | ë¬´ë£Œ |
| Supabase | ë°ì´í„°ë² ì´ìŠ¤ | ë¬´ë£Œ í‹°ì–´ |

---

## 3. í”„ë¡œì íŠ¸ êµ¬ì¡°

### 3.1 ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
food_agent/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ main.py                 # FastAPI ë°±ì—”ë“œ (254ì¤„)
â”‚                               # - POST /chat (ë™ê¸°)
â”‚                               # - POST /chat/stream (SSE ìŠ¤íŠ¸ë¦¬ë°)
â”‚                               # - ì„¸ì…˜ ê´€ë¦¬, ì´ë¯¸ì§€ ì²˜ë¦¬
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agent.py                # LangGraph ReAct ì—ì´ì „íŠ¸ (315ì¤„)
â”‚   â”‚                           # - KoreanFoodAgent í´ë˜ìŠ¤
â”‚   â”‚                           # - ë©€í‹°ëª¨ë‹¬ ë©”ì‹œì§€ ì²˜ë¦¬
â”‚   â”‚                           # - MemorySaver ê¸°ë°˜ íˆìŠ¤í† ë¦¬ ê´€ë¦¬
â”‚   â”‚
â”‚   â”œâ”€â”€ config.py               # í™˜ê²½ ì„¤ì • ê´€ë¦¬ (34ì¤„)
â”‚   â”‚                           # - Settings í´ë˜ìŠ¤ (Pydantic)
â”‚   â”‚                           # - ModelProvider Enum
â”‚   â”‚
â”‚   â”œâ”€â”€ main.py                 # CLI ì§„ì…ì 
â”‚   â”‚
â”‚   â”œâ”€â”€ db/                     # ë°ì´í„°ë² ì´ìŠ¤ ë ˆì´ì–´
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ client.py           # Supabase í´ë¼ì´ì–¸íŠ¸ ì‹±ê¸€í†¤ (24ì¤„)
â”‚   â”‚
â”‚   â”œâ”€â”€ services/               # ì™¸ë¶€ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ serper.py           # Google Lens + í…ìŠ¤íŠ¸ ê²€ìƒ‰ (249ì¤„)
â”‚   â”‚   â”‚                       # - ì´ë¯¸ì§€ ì—…ë¡œë“œ (litterbox, imgbb, freeimage)
â”‚   â”‚   â”‚                       # - EXIF íšŒì „ ë³´ì •
â”‚   â”‚   â”‚                       # - SerpAPI / Serper API í´ë°±
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ kakao.py            # ì¹´ì¹´ì˜¤ë§µ API + Playwright (285ì¤„)
â”‚   â”‚                           # - ì‹ë‹¹ ê²€ìƒ‰
â”‚   â”‚                           # - ë©”ë‰´/í›„ê¸° í¬ë¡¤ë§
â”‚   â”‚
â”‚   â””â”€â”€ tools/                  # LangChain ë„êµ¬ (7ê°œ)
â”‚       â”œâ”€â”€ __init__.py         # ALL_TOOLS ìµìŠ¤í¬íŠ¸
â”‚       â”œâ”€â”€ image.py            # search_food_by_image (135ì¤„)
â”‚       â”œâ”€â”€ restaurant.py       # search_restaurant_info, get_restaurant_reviews (130ì¤„)
â”‚       â”œâ”€â”€ recipe.py           # search_recipe_online (131ì¤„)
â”‚       â”œâ”€â”€ nutrition.py        # get_nutrition_info (89ì¤„)
â”‚       â”œâ”€â”€ save_image.py       # save_food_image (71ì¤„)
â”‚       â””â”€â”€ update_image.py     # update_food_image (72ì¤„)
â”‚
â”œâ”€â”€ frontend/app/               # Next.js í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ layout.tsx          # ì•± ë ˆì´ì•„ì›ƒ
â”‚   â”‚   â””â”€â”€ page.tsx            # ë©”ì¸ ì±„íŒ… í˜ì´ì§€ (236ì¤„)
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ chat-input.tsx      # ì±„íŒ… ì…ë ¥ (ì´ë¯¸ì§€ ì—…ë¡œë“œ ì§€ì›)
â”‚   â”‚   â”œâ”€â”€ chat-message.tsx    # ë©”ì‹œì§€ ë Œë”ë§ (Markdown, ì´ë¯¸ì§€, ì§€ë„)
â”‚   â”‚   â”œâ”€â”€ map-embed.tsx       # ì¹´ì¹´ì˜¤ë§µ ì„ë² ë“œ (313ì¤„)
â”‚   â”‚   â”œâ”€â”€ image-gallery.tsx   # ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬
â”‚   â”‚   â”œâ”€â”€ restaurant-card.tsx # ì‹ë‹¹ ì¹´ë“œ
â”‚   â”‚   â”œâ”€â”€ theme-toggle.tsx    # ë‹¤í¬ëª¨ë“œ í† ê¸€
â”‚   â”‚   â””â”€â”€ ui/                 # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ use-toast.ts        # í† ìŠ¤íŠ¸ ì•Œë¦¼ í›…
â”‚   â”‚
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ api.ts              # API í´ë¼ì´ì–¸íŠ¸
â”‚       â”œâ”€â”€ types.ts            # TypeScript íƒ€ì… ì •ì˜
â”‚       â””â”€â”€ utils.ts            # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ research_note.md        # ì—°êµ¬ì¼ì§€ (ë³¸ ë¬¸ì„œ)
â”‚
â”œâ”€â”€ .env                        # í™˜ê²½ ë³€ìˆ˜ (API í‚¤)
â”œâ”€â”€ pyproject.toml              # Python í”„ë¡œì íŠ¸ ì„¤ì •
â”œâ”€â”€ requirements.txt            # Python ì˜ì¡´ì„±
â””â”€â”€ run_all.sh                  # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
```

### 3.2 ëª¨ë“ˆë³„ ì—­í• 
| ëª¨ë“ˆ | íŒŒì¼ | í•µì‹¬ ì—­í•  | ì£¼ìš” í•¨ìˆ˜/í´ë˜ìŠ¤ |
|------|------|-----------|-----------------|
| **ì—ì´ì „íŠ¸** | `agent.py` | ReAct íŒ¨í„´ ì—ì´ì „íŠ¸ | `KoreanFoodAgent`, `create_food_agent()` |
| **ì„œë¹„ìŠ¤** | `serper.py` | ì´ë¯¸ì§€/í…ìŠ¤íŠ¸ ê²€ìƒ‰ | `SerperImageSearcher`, `search_with_lens()` |
| **ì„œë¹„ìŠ¤** | `kakao.py` | ì‹ë‹¹ ê²€ìƒ‰/í¬ë¡¤ë§ | `KakaoLocalAPI`, `get_menu_via_playwright()` |
| **ë„êµ¬** | `tools/*.py` | ì—ì´ì „íŠ¸ ë„êµ¬ | `@tool` ë°ì½”ë ˆì´í„° í•¨ìˆ˜ë“¤ |
| **DB** | `client.py` | Supabase ì—°ê²° | `get_supabase_client()` |
| **API** | `main.py` | HTTP ì—”ë“œí¬ì¸íŠ¸ | FastAPI ë¼ìš°í„° |
| **UI** | `page.tsx` | ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ | `ChatPage` ì»´í¬ë„ŒíŠ¸ |

---

## 4. ë„êµ¬(Tools) ìƒì„¸

### 4.1 ë„êµ¬ ëª©ë¡ ë° ì—­í• 
| ë„êµ¬ëª… | ì…ë ¥ | ì¶œë ¥ | ì™¸ë¶€ ì˜ì¡´ì„± |
|--------|------|------|-------------|
| `search_food_by_image` | ì´ë¯¸ì§€ ê²½ë¡œ/URL | ê²€ìƒ‰ ê²°ê³¼ + ë¸”ë¡œê·¸ ë³¸ë¬¸ | SerpAPI, Serper |
| `search_restaurant_info` | ê²€ìƒ‰ì–´ | ì‹ë‹¹ ì •ë³´ + ë©”ë‰´ + [MAP:] íƒœê·¸ | Kakao API, Playwright |
| `get_restaurant_reviews` | ì‹ë‹¹ëª… | í›„ê¸° ëª©ë¡ + íƒœê·¸ë³„ í‰ê°€ | Playwright |
| `search_recipe_online` | ê²€ìƒ‰ì–´ | ë ˆì‹œí”¼ (ì¬ë£Œ, ì¡°ë¦¬ìˆœì„œ) | Serper, BeautifulSoup |
| `get_nutrition_info` | ê²€ìƒ‰ì–´ | ì˜ì–‘ì •ë³´ | Serper, BeautifulSoup |
| `save_food_image` | ì´ë¯¸ì§€ URL, ìŒì‹ëª… | image_id | Supabase |
| `update_food_image` | image_id, ê²€ì¦ ì •ë³´ | ì—…ë°ì´íŠ¸ ê²°ê³¼ | Supabase |

### 4.2 ë„êµ¬ë³„ ì‘ë‹µ ì‹œê°„ (ì¸¡ì • ê²°ê³¼)
| ë„êµ¬ | í‰ê·  ì‘ë‹µ ì‹œê°„ | ë¹„ê³  |
|------|---------------|------|
| `search_food_by_image` | 3-5ì´ˆ | ì´ë¯¸ì§€ ì—…ë¡œë“œ + API í˜¸ì¶œ |
| `search_restaurant_info` | 5-6ì´ˆ | Kakao API + Playwright |
| `search_recipe_online` | 1.5-2ì´ˆ | í…ìŠ¤íŠ¸ ê²€ìƒ‰ + í¬ë¡¤ë§ |
| `get_restaurant_reviews` | 8-15ì´ˆ | Playwright í¬ë¡¤ë§ |
| `get_nutrition_info` | 2ì´ˆ | í…ìŠ¤íŠ¸ ê²€ìƒ‰ + í¬ë¡¤ë§ |
| `save_food_image` | 0.4ì´ˆ | Supabase INSERT |
| `update_food_image` | 0.08ì´ˆ | Supabase UPDATE |

### 4.3 ë„êµ¬ ì„ íƒ ë¡œì§ (System Prompt ê¸°ë°˜)
```
ì‚¬ìš©ì ì§ˆë¬¸ ë¶„ì„
      â”‚
      â”œâ”€ ì´ë¯¸ì§€ í¬í•¨? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ search_food_by_image
      â”‚
      â”œâ”€ "ë§›ì§‘", "ì‹ë‹¹", "ì–´ë””" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ search_restaurant_info
      â”‚
      â”œâ”€ "ë ˆì‹œí”¼", "ë§Œë“œëŠ” ë²•", "ìš”ë¦¬ë²•" â”€â”€â”€â”€â†’ search_recipe_online
      â”‚
      â”œâ”€ "í›„ê¸°", "ë¦¬ë·°", "í‰ê°€" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ get_restaurant_reviews
      â”‚
      â”œâ”€ "ì¹¼ë¡œë¦¬", "ì˜ì–‘", "ì—´ëŸ‰" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ get_nutrition_info
      â”‚
      â””â”€ ì´ì „ ëŒ€í™” ì°¸ì¡° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ë„êµ¬ ì„ íƒ
```

---

## 5. ì›Œí¬í”Œë¡œìš°ë³„ ìƒì„¸ ì˜ˆì‹œ

### 5.1 ì›Œí¬í”Œë¡œìš° 1: ì´ë¯¸ì§€ë¡œ ìŒì‹ ì¸ì‹

**ì‚¬ìš©ì ì…ë ¥:**
```
[ì´ë¯¸ì§€: ë¹„ë¹”ë°¥ ì‚¬ì§„] ì´ ìŒì‹ ë­ì•¼?
```

**ì‹¤í–‰ íë¦„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: í”„ë¡ íŠ¸ì—”ë“œ - ì´ë¯¸ì§€ ì²˜ë¦¬                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ì‚¬ìš©ìê°€ ì´ë¯¸ì§€ ì„ íƒ (ChatInput ì»´í¬ë„ŒíŠ¸)                     â”‚
â”‚ 2. File â†’ Base64 ì¸ì½”ë”©                                        â”‚
â”‚ 3. POST /chat/stream ìš”ì²­                                      â”‚
â”‚    {                                                           â”‚
â”‚      "message": "ì´ ìŒì‹ ë­ì•¼?",                                â”‚
â”‚      "images": [{"data": "base64...", "mime_type": "image/jpeg"}]â”‚
â”‚    }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: ë°±ì—”ë“œ - ì´ë¯¸ì§€ ì €ì¥                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Base64 ë””ì½”ë”© â†’ ì„ì‹œ íŒŒì¼ ì €ì¥ (/tmp/xxx.jpg)                â”‚
â”‚ 2. ë©”ì‹œì§€ ì¡°í•©: "/tmp/xxx.jpg ì´ ìŒì‹ ë­ì•¼?"                    â”‚
â”‚ 3. KoreanFoodAgent.stream() í˜¸ì¶œ                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 3: ì—ì´ì „íŠ¸ - ë©€í‹°ëª¨ë‹¬ ë©”ì‹œì§€ ìƒì„±                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. extract_image_paths() â†’ ["/tmp/xxx.jpg"]                    â”‚
â”‚ 2. load_image_as_base64() â†’ Base64 ì¸ì½”ë”©                      â”‚
â”‚ 3. HumanMessage ìƒì„±:                                          â”‚
â”‚    content = [                                                 â”‚
â”‚      {"type": "image_url", "image_url": {"url": "data:..."}},  â”‚
â”‚      {"type": "text", "text": "/tmp/xxx.jpg ì´ ìŒì‹ ë­ì•¼?"}    â”‚
â”‚    ]                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 4: LangGraph ReAct ë£¨í”„                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ [Reasoning] "ìƒˆ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë‹ˆ search_food_by_image í˜¸ì¶œ"       â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚ [Acting] search_food_by_image("/tmp/xxx.jpg")                  â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”œâ”€ SerperImageSearcher.upload_image()                     â”‚
â”‚      â”‚   â†’ litterbox.catbox.moeë¡œ ì—…ë¡œë“œ                        â”‚
â”‚      â”‚   â†’ https://litter.catbox.moe/abc123.jpg                â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”œâ”€ SerperImageSearcher.search_with_lens()                 â”‚
â”‚      â”‚   â†’ SerpAPI Google Lens í˜¸ì¶œ                             â”‚
â”‚      â”‚   â†’ visual_matches ë°˜í™˜                                  â”‚
â”‚      â”‚                                                          â”‚
â”‚      â””â”€ ë¸”ë¡œê·¸ ë³¸ë¬¸ ì¶”ì¶œ (extract_blog_content)                  â”‚
â”‚                                                                 â”‚
â”‚ [Observation] ë„êµ¬ ê²°ê³¼:                                        â”‚
â”‚   "[ê²€ìƒ‰ ê²°ê³¼]                                                   â”‚
â”‚    1. ë¹„ë¹”ë°¥ - ìœ„í‚¤ë°±ê³¼                                          â”‚
â”‚    2. ì „ì£¼ë¹„ë¹”ë°¥ ë§›ì§‘ í›„ê¸° - ë„¤ì´ë²„ ë¸”ë¡œê·¸                        â”‚
â”‚    [ê²€ìƒ‰ ê²°ê³¼ ì´ë¯¸ì§€]                                            â”‚
â”‚    [IMAGE:https://...thumbnail1.jpg]                            â”‚
â”‚    [ë¸”ë¡œê·¸ ë³¸ë¬¸]                                                 â”‚
â”‚    ë¹„ë¹”ë°¥ ì£¼ë¬¸í•´ì„œ ë¨¹ì—ˆëŠ”ë° ë§›ìˆì—ˆì–´ìš”..."                         â”‚
â”‚                                                                 â”‚
â”‚ [Reasoning] "ì¸ë„¤ì¼ê³¼ ì›ë³¸ ë¹„êµ â†’ ë‹¤ë¥¸ ì´ë¯¸ì§€ â†’ ìƒˆ ì´ë¯¸ì§€"        â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚ [Acting] save_food_image(                                      â”‚
â”‚            image_url="https://litter.../abc123.jpg",           â”‚
â”‚            food_name="ë¹„ë¹”ë°¥"                                   â”‚
â”‚          )                                                      â”‚
â”‚      â”‚                                                          â”‚
â”‚      â””â”€ Supabase INSERT â†’ image_id: "uuid-123"                 â”‚
â”‚                                                                 â”‚
â”‚ [Response] ìµœì¢… ì‘ë‹µ ìƒì„±                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 5: ì‘ë‹µ ë°˜í™˜                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SSE ìŠ¤íŠ¸ë¦¬ë°:                                                   â”‚
â”‚ data: {"type": "tool", "tool": "search_food_by_image", "status": "start"}
â”‚ data: {"type": "tool", "tool": "search_food_by_image", "status": "done"}
â”‚ data: {"type": "tool", "tool": "save_food_image", "status": "start"}
â”‚ data: {"type": "tool", "tool": "save_food_image", "status": "done"}
â”‚ data: {"type": "text", "content": "ë¹„ë¹”ë°¥"}                     â”‚
â”‚ data: {"type": "text", "content": "ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤! ğŸš"}          â”‚
â”‚ data: {"type": "done", "map_url": null, "images": [...]}       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìµœì¢… ì‘ë‹µ:**
```
ë¹„ë¹”ë°¥ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤! ğŸš
ë‹¤ì–‘í•œ ë‚˜ë¬¼ê³¼ ê³ ì¶”ì¥ì´ ì˜¬ë¼ê°„ ì „í†µ ë¹„ë¹”ë°¥ì´ì—ìš”.
í˜¹ì‹œ ì–´ë””ì„œ ë“œì…¨ë‚˜ìš”?
```

---

### 5.2 ì›Œí¬í”Œë¡œìš° 2: ì‹ë‹¹ ê²€ìƒ‰ + ì§€ë„ í‘œì‹œ

**ì‚¬ìš©ì ì…ë ¥:**
```
ê°•ë‚¨ì—­ ê·¼ì²˜ ë¹„ë¹”ë°¥ ë§›ì§‘ ì¶”ì²œí•´ì¤˜
```

**ì‹¤í–‰ íë¦„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: ReAct ì—ì´ì „íŠ¸ ì‹¤í–‰                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ [Reasoning] "ë§›ì§‘ ê²€ìƒ‰ì´ë‹ˆ search_restaurant_info ì‚¬ìš©"          â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚ [Acting] search_restaurant_info("ê°•ë‚¨ì—­ ë¹„ë¹”ë°¥ ë§›ì§‘")            â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”œâ”€ KakaoLocalAPI.search_restaurant()                      â”‚
â”‚      â”‚   URL: https://dapi.kakao.com/v2/local/search/keyword   â”‚
â”‚      â”‚   Params: {query: "ê°•ë‚¨ì—­ ë¹„ë¹”ë°¥ ë§›ì§‘", category_group_code: "FD6"}
â”‚      â”‚                                                          â”‚
â”‚      â”‚   Response (ìƒìœ„ 3ê°œ):                                    â”‚
â”‚      â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚      â”‚   â”‚ 1. ì „ì£¼ì¤‘ì•™íšŒê´€                             â”‚         â”‚
â”‚      â”‚   â”‚    place_id: 12345678                      â”‚         â”‚
â”‚      â”‚   â”‚    x: 127.028, y: 37.497                   â”‚         â”‚
â”‚      â”‚   â”‚    address: ì„œìš¸ ê°•ë‚¨êµ¬ ê°•ë‚¨ëŒ€ë¡œ...          â”‚         â”‚
â”‚      â”‚   â”‚    phone: 02-xxx-xxxx                      â”‚         â”‚
â”‚      â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚      â”‚   â”‚ 2. ê³ ê¶                                    â”‚         â”‚
â”‚      â”‚   â”‚    place_id: 23456789                      â”‚         â”‚
â”‚      â”‚   â”‚    ...                                     â”‚         â”‚
â”‚      â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚      â”‚   â”‚ 3. ë¹„ë¹”ë°¥ì „ë¬¸ì                              â”‚         â”‚
â”‚      â”‚   â”‚    place_id: 34567890                      â”‚         â”‚
â”‚      â”‚   â”‚    ...                                     â”‚         â”‚
â”‚      â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”œâ”€ get_menu_via_playwright(place_id="12345678")           â”‚
â”‚      â”‚   1. Playwright ë¸Œë¼ìš°ì € ì‹¤í–‰ (headless)                  â”‚
â”‚      â”‚   2. https://place.map.kakao.com/12345678 ì ‘ì†           â”‚
â”‚      â”‚   3. ë©”ë‰´ íƒ­ í´ë¦­                                         â”‚
â”‚      â”‚   4. ìŠ¤í¬ë¡¤í•˜ì—¬ ë©”ë‰´ ë¡œë“œ                                 â”‚
â”‚      â”‚   5. "ì›" í¬í•¨ ìš”ì†Œ íŒŒì‹±                                  â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”‚   Menu Result:                                           â”‚
â”‚      â”‚   "ì „ì£¼ë¹„ë¹”ë°¥ 12,000ì›                                    â”‚
â”‚      â”‚    ëŒì†¥ë¹„ë¹”ë°¥ 13,000ì›                                    â”‚
â”‚      â”‚    ìœ¡íšŒë¹„ë¹”ë°¥ 15,000ì›"                                   â”‚
â”‚      â”‚                                                          â”‚
â”‚      â””â”€ ë°˜í™˜ê°’ ì¡°í•©                                              â”‚
â”‚                                                                 â”‚
â”‚ [Observation] ë„êµ¬ ê²°ê³¼:                                        â”‚
â”‚   "[MAP:37.497,127.028,ì „ì£¼ì¤‘ì•™íšŒê´€|ì„œìš¸ ê°•ë‚¨êµ¬...|02-xxx|í•œì‹|url;â”‚
â”‚         37.498,127.029,ê³ ê¶|ì„œìš¸ ê°•ë‚¨êµ¬...|02-yyy|í•œì‹|url;       â”‚
â”‚         37.499,127.030,ë¹„ë¹”ë°¥ì „ë¬¸ì |ì„œìš¸ ê°•ë‚¨êµ¬...|02-zzz|í•œì‹|url]â”‚
â”‚                                                                 â”‚
â”‚    [1] ì „ì£¼ì¤‘ì•™íšŒê´€                                              â”‚
â”‚        ì£¼ì†Œ: ì„œìš¸ ê°•ë‚¨êµ¬ ê°•ë‚¨ëŒ€ë¡œ...                              â”‚
â”‚        ì „í™”: 02-xxx-xxxx                                        â”‚
â”‚        ğŸ—ºï¸ ì§€ë„: https://place.map.kakao.com/12345678            â”‚
â”‚                                                                 â”‚
â”‚    [ë©”ë‰´íŒ]                                                      â”‚
â”‚    ì „ì£¼ë¹„ë¹”ë°¥ 12,000ì›                                           â”‚
â”‚    ëŒì†¥ë¹„ë¹”ë°¥ 13,000ì›..."                                       â”‚
â”‚                                                                 â”‚
â”‚ [Response] ì‘ë‹µ ìƒì„± (MAP íƒœê·¸ í¬í•¨)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2: í”„ë¡ íŠ¸ì—”ë“œ - ì§€ë„ ë Œë”ë§                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ 1. ì‘ë‹µì—ì„œ [MAP:...] íƒœê·¸ ì¶”ì¶œ                                  â”‚
â”‚    const mapMatch = response.match(/\[MAP:([^\]]+)\]/);        â”‚
â”‚                                                                 â”‚
â”‚ 2. ì¢Œí‘œ íŒŒì‹± (MapEmbed.tsx - parseCoordinates)                  â”‚
â”‚    "37.497,127.028,ì „ì£¼ì¤‘ì•™íšŒê´€|ì£¼ì†Œ|ì „í™”|ì¹´í…Œê³ ë¦¬|url"           â”‚
â”‚    â†’ { lat: 37.497, lng: 127.028, name: "ì „ì£¼ì¤‘ì•™íšŒê´€", ... }   â”‚
â”‚                                                                 â”‚
â”‚ 3. ì¹´ì¹´ì˜¤ë§µ SDKë¡œ ì§€ë„ ìƒì„±                                      â”‚
â”‚    - ì²« ë²ˆì§¸ ì¢Œí‘œë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ì •                                 â”‚
â”‚    - ëª¨ë“  ì‹ë‹¹ì— ì»¬ëŸ¬ ë§ˆì»¤ ì¶”ê°€ (1, 2, 3)                        â”‚
â”‚    - bounds ì¡°ì •í•˜ì—¬ ëª¨ë“  ë§ˆì»¤ í‘œì‹œ                              â”‚
â”‚                                                                 â”‚
â”‚ 4. ë§ˆì»¤ í´ë¦­ ì‹œ ì‹ë‹¹ ì •ë³´ íŒ¨ë„ í‘œì‹œ                              â”‚
â”‚    - ì‹ë‹¹ëª…, ì£¼ì†Œ, ì „í™”ë²ˆí˜¸                                      â”‚
â”‚    - "ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°" ë²„íŠ¼                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìµœì¢… ì‘ë‹µ:**
```markdown
ê°•ë‚¨ì—­ ë¹„ë¹”ë°¥ ë§›ì§‘ 3ê³³ ì¶”ì²œë“œë ¤ìš”! ğŸš

**1. ì „ì£¼ì¤‘ì•™íšŒê´€** â­
- ğŸ“ ì„œìš¸ ê°•ë‚¨êµ¬ ê°•ë‚¨ëŒ€ë¡œ 396
- ğŸ“ 02-xxx-xxxx
- ğŸ’° ì „ì£¼ë¹„ë¹”ë°¥ 12,000ì› / ëŒì†¥ë¹„ë¹”ë°¥ 13,000ì›
- [ì¹´ì¹´ì˜¤ë§µ](https://place.map.kakao.com/12345678)

**2. ê³ ê¶**
- ğŸ“ ì„œìš¸ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ...
- ğŸ’° ê¶ì¤‘ë¹„ë¹”ë°¥ 15,000ì›
- [ì¹´ì¹´ì˜¤ë§µ](https://place.map.kakao.com/23456789)

**3. ë¹„ë¹”ë°¥ì „ë¬¸ì **
- ğŸ“ ì„œìš¸ ê°•ë‚¨êµ¬...
- [ì¹´ì¹´ì˜¤ë§µ](https://place.map.kakao.com/34567890)

[ì§€ë„: 3ê°œ ì‹ë‹¹ ë§ˆì»¤ í‘œì‹œ]
```

---

### 5.3 ì›Œí¬í”Œë¡œìš° 3: ë ˆì‹œí”¼ ê²€ìƒ‰

**ì‚¬ìš©ì ì…ë ¥:**
```
ê¹€ì¹˜ì°Œê°œ ë ˆì‹œí”¼ ì•Œë ¤ì¤˜
```

**ì‹¤í–‰ íë¦„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: ReAct ì—ì´ì „íŠ¸ ì‹¤í–‰                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ [Reasoning] "ë ˆì‹œí”¼ ì§ˆë¬¸ì´ë‹ˆ search_recipe_online ì‚¬ìš©"          â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚ [Acting] search_recipe_online("ê¹€ì¹˜ì°Œê°œ ë ˆì‹œí”¼")                 â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”œâ”€ SerperImageSearcher.search_text()                      â”‚
â”‚      â”‚   URL: https://google.serper.dev/search                 â”‚
â”‚      â”‚   Query: "ê¹€ì¹˜ì°Œê°œ ë ˆì‹œí”¼"                                â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”‚   Response:                                              â”‚
â”‚      â”‚   organic_results: [                                     â”‚
â”‚      â”‚     {link: "https://10000recipe.com/recipe/123", ...},   â”‚
â”‚      â”‚     {link: "https://blog.naver.com/...", ...},           â”‚
â”‚      â”‚     ...                                                  â”‚
â”‚      â”‚   ]                                                      â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”œâ”€ _crawl_recipe_fast() - ìƒìœ„ 3ê°œ í˜ì´ì§€ í¬ë¡¤ë§            â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”‚   [ë§Œê°œì˜ë ˆì‹œí”¼ í¬ë¡¤ë§]                                    â”‚
â”‚      â”‚   BeautifulSoupìœ¼ë¡œ íŒŒì‹±:                                 â”‚
â”‚      â”‚   - ì œëª©: .view2_summary h3                              â”‚
â”‚      â”‚   - ì¬ë£Œ: .ready_ingre3 li                               â”‚
â”‚      â”‚   - ì¡°ë¦¬ìˆœì„œ: .view_step_cont                            â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”‚   [ë„¤ì´ë²„ ë¸”ë¡œê·¸ í¬ë¡¤ë§]                                   â”‚
â”‚      â”‚   ëª¨ë°”ì¼ URL ë³€í™˜ â†’ ë³¸ë¬¸ ì¶”ì¶œ                             â”‚
â”‚      â”‚                                                          â”‚
â”‚      â””â”€ ê²°ê³¼ ì¡°í•©                                                â”‚
â”‚                                                                 â”‚
â”‚ [Observation] ë„êµ¬ ê²°ê³¼:                                        â”‚
â”‚   "[ê²€ìƒ‰: ê¹€ì¹˜ì°Œê°œ ë ˆì‹œí”¼]                                        â”‚
â”‚                                                                 â”‚
â”‚    === ë ˆì‹œí”¼ 1 ===                                              â”‚
â”‚    [ë°±ì¢…ì› ê¹€ì¹˜ì°Œê°œ]                                              â”‚
â”‚    ì¶œì²˜: https://10000recipe.com/recipe/123                     â”‚
â”‚                                                                 â”‚
â”‚    [ì¬ë£Œ]                                                        â”‚
â”‚    - ê¹€ì¹˜ 300g                                                  â”‚
â”‚    - ë¼ì§€ê³ ê¸° ì•ë‹¤ë¦¬ì‚´ 200g                                      â”‚
â”‚    - ë‘ë¶€ 1/2ëª¨                                                 â”‚
â”‚    - ëŒ€íŒŒ 1ëŒ€                                                   â”‚
â”‚    - ê³ ì¶§ê°€ë£¨ 1í°ìˆ                                               â”‚
â”‚    - ë‹¤ì§„ë§ˆëŠ˜ 1í°ìˆ                                               â”‚
â”‚                                                                 â”‚
â”‚    [ì¡°ë¦¬ ìˆœì„œ]                                                   â”‚
â”‚    1. ê¹€ì¹˜ëŠ” ë¨¹ê¸° ì¢‹ê²Œ ì°ì–´ì£¼ì„¸ìš”                                 â”‚
â”‚    2. ëƒ„ë¹„ì— ì°¸ê¸°ë¦„ì„ ë‘ë¥´ê³  ë¼ì§€ê³ ê¸°ë¥¼ ë³¶ì•„ì£¼ì„¸ìš”                 â”‚
â”‚    3. ê³ ê¸°ê°€ ìµìœ¼ë©´ ê¹€ì¹˜ë¥¼ ë„£ê³  í•¨ê»˜ ë³¶ì•„ì£¼ì„¸ìš”                    â”‚
â”‚    ..."                                                         â”‚
â”‚                                                                 â”‚
â”‚ [Response] ì‘ë‹µ ìƒì„±                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìµœì¢… ì‘ë‹µ:**
```markdown
ê¹€ì¹˜ì°Œê°œ ë ˆì‹œí”¼ ì•Œë ¤ë“œë¦´ê²Œìš”! ğŸ²

## ì¬ë£Œ (2ì¸ë¶„)
- ì˜ ìµì€ ê¹€ì¹˜ 300g
- ë¼ì§€ê³ ê¸° ì•ë‹¤ë¦¬ì‚´ 200g
- ë‘ë¶€ 1/2ëª¨
- ëŒ€íŒŒ 1ëŒ€
- ê³ ì¶§ê°€ë£¨ 1í°ìˆ 
- ë‹¤ì§„ë§ˆëŠ˜ 1í°ìˆ 
- ì°¸ê¸°ë¦„, êµ­ê°„ì¥

## ì¡°ë¦¬ ìˆœì„œ
1ï¸âƒ£ ê¹€ì¹˜ëŠ” ë¨¹ê¸° ì¢‹ê²Œ ì°ì–´ì£¼ì„¸ìš”
2ï¸âƒ£ ëƒ„ë¹„ì— ì°¸ê¸°ë¦„ì„ ë‘ë¥´ê³  ë¼ì§€ê³ ê¸°ë¥¼ ë³¶ì•„ì£¼ì„¸ìš”
3ï¸âƒ£ ê³ ê¸°ê°€ ë°˜ì¯¤ ìµìœ¼ë©´ ê¹€ì¹˜ë¥¼ ë„£ê³  í•¨ê»˜ ë³¶ì•„ì£¼ì„¸ìš”
4ï¸âƒ£ ë¬¼ 2ì»µì„ ë„£ê³  ë“ì—¬ì£¼ì„¸ìš”
5ï¸âƒ£ ë“ì–´ì˜¤ë¥´ë©´ ê³ ì¶§ê°€ë£¨, ë‹¤ì§„ë§ˆëŠ˜ ë„£ê³  ì¤‘ë¶ˆì—ì„œ 15ë¶„
6ï¸âƒ£ ë‘ë¶€ì™€ ëŒ€íŒŒë¥¼ ë„£ê³  5ë¶„ ë” ë“ì´ë©´ ì™„ì„±!

ğŸ’¡ **íŒ**: ê¹€ì¹˜ êµ­ë¬¼ë„ í•¨ê»˜ ë„£ìœ¼ë©´ ë” ì§„í•œ ë§›ì´ ë‚˜ìš”!
```

---

### 5.4 ì›Œí¬í”Œë¡œìš° 4: í›„ê¸° ì¡°íšŒ

**ì‚¬ìš©ì ì…ë ¥:**
```
ì „ì£¼ì¤‘ì•™íšŒê´€ í›„ê¸° ì–´ë•Œ?
```

**ì‹¤í–‰ íë¦„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: ReAct ì—ì´ì „íŠ¸ ì‹¤í–‰                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ [Reasoning] "í›„ê¸° ì§ˆë¬¸ì´ë‹ˆ get_restaurant_reviews ì‚¬ìš©"          â”‚
â”‚      â”‚                                                          â”‚
â”‚      â–¼                                                          â”‚
â”‚ [Acting] get_restaurant_reviews("ì „ì£¼ì¤‘ì•™íšŒê´€")                  â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”œâ”€ KakaoLocalAPI.search_restaurant()                      â”‚
â”‚      â”‚   â†’ place_id: 12345678 íšë“                              â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”œâ”€ get_reviews_via_playwright(place_id, max_reviews=15)   â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”‚   1. Playwright ë¸Œë¼ìš°ì € ì‹¤í–‰                             â”‚
â”‚      â”‚   2. https://place.map.kakao.com/12345678 ì ‘ì†           â”‚
â”‚      â”‚   3. í›„ê¸° íƒ­ ì°¾ê¸° ("í›„ê¸° 123ê°œ" í…ìŠ¤íŠ¸ í¬í•¨ ìš”ì†Œ)          â”‚
â”‚      â”‚   4. íƒ­ í´ë¦­ â†’ í›„ê¸° ëª©ë¡ ë¡œë“œ                             â”‚
â”‚      â”‚   5. ìŠ¤í¬ë¡¤í•˜ì—¬ ì¶”ê°€ í›„ê¸° ë¡œë“œ                            â”‚
â”‚      â”‚   6. í…ìŠ¤íŠ¸ íŒŒì‹±:                                         â”‚
â”‚      â”‚      - í‰ì : "ë³„ì " ë‹¤ìŒ ë¼ì¸                             â”‚
â”‚      â”‚      - í›„ê¸° ìˆ˜: "í›„ê¸°" ë‹¤ìŒ ìˆ«ì                          â”‚
â”‚      â”‚      - íƒœê·¸: ë§›, ê°€ì„±ë¹„, ì¹œì ˆ ë“±                          â”‚
â”‚      â”‚      - í›„ê¸° ë³¸ë¬¸: 15-300ì, í‚¤ì›Œë“œ í¬í•¨                   â”‚
â”‚      â”‚                                                          â”‚
â”‚      â””â”€ ê²°ê³¼ ì¡°í•©                                                â”‚
â”‚                                                                 â”‚
â”‚ [Observation] ë„êµ¬ ê²°ê³¼:                                        â”‚
â”‚   "[ì „ì£¼ì¤‘ì•™íšŒê´€ í›„ê¸°]                                            â”‚
â”‚    ğŸ“ ì£¼ì†Œ: ì„œìš¸ ê°•ë‚¨êµ¬ ê°•ë‚¨ëŒ€ë¡œ 396                              â”‚
â”‚    ğŸ”— ì¹´ì¹´ì˜¤ë§µ: https://place.map.kakao.com/12345678             â”‚
â”‚                                                                 â”‚
â”‚    â­ í‰ì : 4.5ì                                                 â”‚
â”‚    ğŸ“ í›„ê¸°: 1,234ê°œ                                              â”‚
â”‚                                                                 â”‚
â”‚    [íƒœê·¸ë³„ í‰ê°€]                                                 â”‚
â”‚    â€¢ ë§›: 892ëª…                                                  â”‚
â”‚    â€¢ ê°€ì„±ë¹„: 456ëª…                                               â”‚
â”‚    â€¢ ì¹œì ˆ: 234ëª…                                                 â”‚
â”‚    â€¢ ë¶„ìœ„ê¸°: 123ëª…                                               â”‚
â”‚                                                                 â”‚
â”‚    [ìµœê·¼ í›„ê¸° 15ê°œ]                                              â”‚
â”‚    â€¢ ë¹„ë¹”ë°¥ì´ ì •ë§ ë§›ìˆì–´ìš”! ì•¼ì±„ê°€ ì‹ ì„ í•˜ê³  ê³ ì¶”ì¥ë„ ì ë‹¹í•´ìš”     â”‚
â”‚    â€¢ ì›¨ì´íŒ…ì´ ì¢€ ìˆì§€ë§Œ ê¸°ë‹¤ë¦´ ë§Œí•´ìš”. ëŒì†¥ë¹„ë¹”ë°¥ ì¶”ì²œ!           â”‚
â”‚    â€¢ ê°€ê²© ëŒ€ë¹„ ì–‘ì´ í‘¸ì§í•©ë‹ˆë‹¤. ì¬ë°©ë¬¸ ì˜ì‚¬ ìˆì–´ìš”                â”‚
â”‚    â€¢ ì§ì›ë¶„ë“¤ì´ ì¹œì ˆí•´ì„œ ì¢‹ì•˜ì–´ìš”                                 â”‚
â”‚    â€¢ ì£¼ì°¨ê°€ ë¶ˆí¸í•´ì„œ ëŒ€ì¤‘êµí†µ ì´ìš© ì¶”ì²œë“œë ¤ìš”                     â”‚
â”‚    ..."                                                         â”‚
â”‚                                                                 â”‚
â”‚ [Response] ì‘ë‹µ ìƒì„± (í›„ê¸° ìš”ì•½)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìµœì¢… ì‘ë‹µ:**
```markdown
ì „ì£¼ì¤‘ì•™íšŒê´€ í›„ê¸° ìš”ì•½í•´ë“œë¦´ê²Œìš”! â­

## ê¸°ë³¸ ì •ë³´
- **í‰ì **: 4.5ì  (í›„ê¸° 1,234ê°œ)
- **ì£¼ì†Œ**: ì„œìš¸ ê°•ë‚¨êµ¬ ê°•ë‚¨ëŒ€ë¡œ 396
- [ì¹´ì¹´ì˜¤ë§µì—ì„œ ë³´ê¸°](https://place.map.kakao.com/12345678)

## íƒœê·¸ë³„ í‰ê°€
| íƒœê·¸ | í‰ê°€ |
|------|------|
| ë§› | ğŸ‘ 892ëª… |
| ê°€ì„±ë¹„ | ğŸ‘ 456ëª… |
| ì¹œì ˆ | ğŸ‘ 234ëª… |

## ì¥ì  ğŸ‘
- ë¹„ë¹”ë°¥ ë§›ì´ ì¢‹ê³  ì•¼ì±„ê°€ ì‹ ì„ í•¨
- ê°€ê²© ëŒ€ë¹„ ì–‘ì´ í‘¸ì§
- ì§ì›ë“¤ì´ ì¹œì ˆ

## ë‹¨ì  ğŸ‘
- ì ì‹¬ì‹œê°„ ì›¨ì´íŒ… ìˆìŒ
- ì£¼ì°¨ ë¶ˆí¸ (ëŒ€ì¤‘êµí†µ ì´ìš© ê¶Œì¥)

## ì¶”ì²œ ë©”ë‰´
ğŸ¥‡ **ëŒì†¥ë¹„ë¹”ë°¥** - í›„ê¸°ì—ì„œ ê°€ì¥ ë§ì´ ì–¸ê¸‰ë¨!
```

---

### 5.5 ì›Œí¬í”Œë¡œìš° 5: ë©€í‹°í„´ ëŒ€í™” (ì»¨í…ìŠ¤íŠ¸ ìœ ì§€)

**ëŒ€í™” ì˜ˆì‹œ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Turn 1: ì´ë¯¸ì§€ ì¸ì‹                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‚¬ìš©ì: [ì´ë¯¸ì§€] ì´ê±° ë­ì•¼?                                       â”‚
â”‚                                                                 â”‚
â”‚ ì—ì´ì „íŠ¸:                                                        â”‚
â”‚   â””â”€ search_food_by_image í˜¸ì¶œ                                  â”‚
â”‚   â””â”€ save_food_image í˜¸ì¶œ (image_id: "uuid-123" ì €ì¥)           â”‚
â”‚                                                                 â”‚
â”‚ ì‘ë‹µ: "ëŒì†¥ë¹„ë¹”ë°¥ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤! ğŸš                                â”‚
â”‚       ê³ ìŠ¬ê³ ìŠ¬í•œ ë°¥ ìœ„ì— ë‹¤ì–‘í•œ ë‚˜ë¬¼ì´ ì˜¬ë¼ê°€ ìˆë„¤ìš”."             â”‚
â”‚                                                                 â”‚
â”‚ [MemorySaver ìƒíƒœ]                                              â”‚
â”‚ thread_id: "session-abc"                                        â”‚
â”‚ messages: [user_image_msg, ai_response]                         â”‚
â”‚ context: {food: "ëŒì†¥ë¹„ë¹”ë°¥", image_id: "uuid-123"}              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ ì´ì „ ì»¨í…ìŠ¤íŠ¸ ìœ ì§€
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Turn 2: ë ˆì‹œí”¼ ì§ˆë¬¸ (ì»¨í…ìŠ¤íŠ¸ ì°¸ì¡°)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‚¬ìš©ì: ë ˆì‹œí”¼ ì•Œë ¤ì¤˜                                            â”‚
â”‚                                                                 â”‚
â”‚ ì—ì´ì „íŠ¸:                                                        â”‚
â”‚   â””â”€ [Reasoning] "ì´ì „ ëŒ€í™”ì—ì„œ ëŒì†¥ë¹„ë¹”ë°¥ ì–¸ê¸‰ë¨"                â”‚
â”‚   â””â”€ search_recipe_online("ëŒì†¥ë¹„ë¹”ë°¥ ë ˆì‹œí”¼") í˜¸ì¶œ              â”‚
â”‚                                                                 â”‚
â”‚ ì‘ë‹µ: "ëŒì†¥ë¹„ë¹”ë°¥ ë ˆì‹œí”¼ì…ë‹ˆë‹¤!                                   â”‚
â”‚       [ì¬ë£Œ] ë°¥, ë‚˜ë¬¼, ê³ ì¶”ì¥, ì°¸ê¸°ë¦„, ê³„ë€...                    â”‚
â”‚       [ì¡°ë¦¬ë²•] 1. ëŒì†¥ì„ ì˜ˆì—´... 2. ë°¥ì„ ë‹´ê³ ..."                â”‚
â”‚                                                                 â”‚
â”‚ [MemorySaver ìƒíƒœ]                                              â”‚
â”‚ messages: [...ì´ì „ ë©”ì‹œì§€, user_recipe_msg, ai_recipe_response] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Turn 3: ì˜ì–‘ì •ë³´ ì§ˆë¬¸ (ì»¨í…ìŠ¤íŠ¸ ì°¸ì¡°)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‚¬ìš©ì: ì¹¼ë¡œë¦¬ëŠ”?                                                â”‚
â”‚                                                                 â”‚
â”‚ ì—ì´ì „íŠ¸:                                                        â”‚
â”‚   â””â”€ [Reasoning] "ì´ì „ ëŒ€í™”ì˜ ëŒì†¥ë¹„ë¹”ë°¥ ì¹¼ë¡œë¦¬"                  â”‚
â”‚   â””â”€ get_nutrition_info("ëŒì†¥ë¹„ë¹”ë°¥ ì¹¼ë¡œë¦¬") í˜¸ì¶œ                â”‚
â”‚                                                                 â”‚
â”‚ ì‘ë‹µ: "ëŒì†¥ë¹„ë¹”ë°¥ 1ì¸ë¶„ ì•½ 550-650kcalì…ë‹ˆë‹¤.                     â”‚
â”‚       - íƒ„ìˆ˜í™”ë¬¼: 80g                                            â”‚
â”‚       - ë‹¨ë°±ì§ˆ: 15g                                              â”‚
â”‚       - ì§€ë°©: 12g"                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Turn 4: ê²€ì¦ ì •ë³´ ì—…ë°ì´íŠ¸                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‚¬ìš©ì: ì•„ ë§ë‹¤ ì´ê±° ëª…ë™ì—ì„œ ë¨¹ì—ˆì–´                               â”‚
â”‚                                                                 â”‚
â”‚ ì—ì´ì „íŠ¸:                                                        â”‚
â”‚   â””â”€ [Reasoning] "ì‚¬ìš©ìê°€ ìœ„ì¹˜ ì •ë³´ í™•ì¸ â†’ DB ì—…ë°ì´íŠ¸ í•„ìš”"     â”‚
â”‚   â””â”€ update_food_image(                                         â”‚
â”‚        image_id="uuid-123",                                     â”‚
â”‚        location="ëª…ë™"                                          â”‚
â”‚      )                                                          â”‚
â”‚                                                                 â”‚
â”‚ ì‘ë‹µ: "ëª…ë™ì—ì„œ ë“œì…¨êµ°ìš”! ì •ë³´ ì—…ë°ì´íŠ¸í–ˆìŠµë‹ˆë‹¤ âœ…                  â”‚
â”‚       í˜¹ì‹œ ì‹ë‹¹ ì´ë¦„ë„ ê¸°ì–µë‚˜ì‹œë‚˜ìš”?"                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Turn 5: ì‹ë‹¹ ì •ë³´ í™•ì¸                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‚¬ìš©ì: ì „ì£¼ë¹„ë¹”ë°¥ì§‘ì´ì—ˆì–´                                        â”‚
â”‚                                                                 â”‚
â”‚ ì—ì´ì „íŠ¸:                                                        â”‚
â”‚   â””â”€ [Reasoning] "ì‹ë‹¹ ì´ë¦„ í™•ì¸ â†’ restaurant_verified ì—…ë°ì´íŠ¸" â”‚
â”‚   â””â”€ update_food_image(                                         â”‚
â”‚        image_id="uuid-123",                                     â”‚
â”‚        restaurant_name="ì „ì£¼ë¹„ë¹”ë°¥ì§‘"                            â”‚
â”‚      )                                                          â”‚
â”‚                                                                 â”‚
â”‚ ì‘ë‹µ: "ì „ì£¼ë¹„ë¹”ë°¥ì§‘ ì •ë³´ë„ ì €ì¥í–ˆìŠµë‹ˆë‹¤! âœ…                         â”‚
â”‚       ë§›ìˆê²Œ ë“œì…¨ê¸¸ ë°”ë¼ìš” ğŸ˜Š"                                    â”‚
â”‚                                                                 â”‚
â”‚ [DB ìƒíƒœ]                                                        â”‚
â”‚ food_images í…Œì´ë¸”:                                              â”‚
â”‚ {                                                               â”‚
â”‚   id: "uuid-123",                                               â”‚
â”‚   image_url: "https://litter.../abc.jpg",                       â”‚
â”‚   food_name: "ëŒì†¥ë¹„ë¹”ë°¥",                                       â”‚
â”‚   food_verified: false,  // ì‚¬ìš©ìê°€ ìŒì‹ëª…ì€ í™•ì¸ ì•ˆí•¨           â”‚
â”‚   restaurant_name: "ì „ì£¼ë¹„ë¹”ë°¥ì§‘",                               â”‚
â”‚   restaurant_verified: true,                                    â”‚
â”‚   location: "ëª…ë™"                                              â”‚
â”‚ }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**MemorySaver ë™ì‘ ì›ë¦¬:**
```python
class KoreanFoodAgent:
    def __init__(self):
        self.checkpointer = MemorySaver()  # ì¸ë©”ëª¨ë¦¬ ì²´í¬í¬ì¸í„°
        self.thread_id = "default"         # ì„¸ì…˜ ì‹ë³„ì

    def chat(self, message: str) -> str:
        human_message = self._prepare_message(message)

        # thread_idê°€ ê°™ìœ¼ë©´ ì´ì „ ëŒ€í™” íˆìŠ¤í† ë¦¬ ìë™ í¬í•¨
        result = self.agent.invoke(
            {"messages": [human_message]},
            config={"configurable": {"thread_id": self.thread_id}}
        )

        # MemorySaverê°€ ë‚´ë¶€ì ìœ¼ë¡œ ë‹¤ìŒì„ ìˆ˜í–‰:
        # 1. thread_idë¡œ ì´ì „ ìƒíƒœ ì¡°íšŒ
        # 2. ìƒˆ ë©”ì‹œì§€ë¥¼ ê¸°ì¡´ messagesì— ì¶”ê°€
        # 3. LLMì—ê²Œ ì „ì²´ íˆìŠ¤í† ë¦¬ ì „ë‹¬
        # 4. ì‘ë‹µ í›„ ìƒíƒœ ì €ì¥
```

---

## 6. Supabase ë°ì´í„°ë² ì´ìŠ¤ í†µí•©

### 6.1 í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ
```sql
CREATE TABLE food_images (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    image_url TEXT NOT NULL,              -- ì—…ë¡œë“œëœ ì´ë¯¸ì§€ URL
    food_name TEXT,                       -- ìŒì‹ ì´ë¦„ (AI ì¶”ë¡  ë˜ëŠ” ì‚¬ìš©ì í™•ì¸)
    food_category TEXT,                   -- ìŒì‹ ì¹´í…Œê³ ë¦¬
    food_source_type TEXT DEFAULT 'unknown',  -- restaurant, home_cooked, delivery
    restaurant_name TEXT,                 -- ì‹ë‹¹ ì´ë¦„
    location TEXT,                        -- ìœ„ì¹˜/ì§€ì—­
    food_verified BOOLEAN DEFAULT FALSE,      -- ìŒì‹ ì´ë¦„ ê²€ì¦ ì—¬ë¶€
    restaurant_verified BOOLEAN DEFAULT FALSE, -- ì‹ë‹¹ ì •ë³´ ê²€ì¦ ì—¬ë¶€
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_food_images_food_name ON food_images(food_name);
CREATE INDEX idx_food_images_verified ON food_images(food_verified, restaurant_verified);
```

### 6.2 ê²€ì¦ í”Œë¡œìš°
```
ì‚¬ìš©ì ì´ë¯¸ì§€ ì—…ë¡œë“œ
        â”‚
        â–¼
search_food_by_image í˜¸ì¶œ
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì—ì´ì „íŠ¸ê°€ ì¸ë„¤ì¼ê³¼ ì›ë³¸ ì´ë¯¸ì§€ ë¹„êµ    â”‚
â”‚                                       â”‚
â”‚ ë¹„êµ ê¸°ì¤€:                             â”‚
â”‚ - ë˜‘ê°™ê±°ë‚˜ í¬ë¡­ëœ ì´ë¯¸ì§€ â†’ ì›¹ì— ìˆìŒ    â”‚
â”‚ - ë¹„ìŠ·í•œ ë‹¤ë¥¸ ìŒì‹ ì‚¬ì§„ â†’ ìƒˆ ì´ë¯¸ì§€!   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€ ì›¹ì— ìˆìŒ â†’ ì €ì¥ ì•ˆí•¨
        â”‚
        â””â”€ ìƒˆ ì´ë¯¸ì§€ â†’ save_food_image í˜¸ì¶œ
                â”‚
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ DB ì €ì¥              â”‚
        â”‚ food_verified: false â”‚
        â”‚ restaurant_verified: â”‚
        â”‚   false              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
        ì‚¬ìš©ì ì‘ë‹µ ("ë¹„ë¹”ë°¥ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤")
                â”‚
                â–¼
        ì‚¬ìš©ì í™•ì¸ ("ì‘ ë§ì•„" ë˜ëŠ” "ëª…ë™ ë³¸ê°€ì—ì„œ ë¨¹ì—ˆì–´")
                â”‚
                â–¼
        update_food_image í˜¸ì¶œ
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚
        â–¼               â–¼
  ìŒì‹ë§Œ í™•ì¸      ì‹ë‹¹ê¹Œì§€ í™•ì¸
  food_verified:   food_verified: true
    true           restaurant_verified: true
```

### 6.3 ë¶€ë¶„ ê²€ì¦ ì§€ì›
| ìƒí™© | food_verified | restaurant_verified |
|------|--------------|---------------------|
| ì €ì¥ ì§í›„ | false | false |
| "ë¹„ë¹”ë°¥ì´ì•¼" | **true** | false |
| "ëª…ë™ ë³¸ê°€ì—ì„œ ë¨¹ì—ˆì–´" | true | **true** |
| "ì§‘ì—ì„œ ë§Œë“¤ì—ˆì–´" | true | N/A (source_type="home_cooked") |

---

## 7. ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸

```python
SYSTEM_PROMPT = """ë‹¹ì‹ ì€ í•œêµ­ ìŒì‹ ì „ë¬¸ê°€ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.

## í•µì‹¬ ì›ì¹™
- ì‚¬ìš©ì ì§ˆë¬¸ì— ë§ëŠ” ë„êµ¬ë¥¼ ì„ íƒí•´ì„œ í˜¸ì¶œí•˜ì„¸ìš”
- ì¶”ì¸¡í•˜ì§€ ë§ê³  ë„êµ¬ ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€í•˜ì„¸ìš”
- ë„êµ¬ ê²°ê³¼ë¥¼ ê·¸ëŒ€ë¡œ ì „ë‹¬í•˜ì§€ ë§ê³ , í•µì‹¬ë§Œ êµ¬ì¡°í™”í•´ì„œ ë‹µë³€í•˜ì„¸ìš”
- í•œêµ­ì–´ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ëŒ€í™”í•˜ê³  ì´ëª¨ì§€ë¥¼ ì ì ˆíˆ ì‚¬ìš©í•˜ì„¸ìš”

## ë„êµ¬ ì‚¬ìš©
- search_food_by_image: í˜„ì¬ ë©”ì‹œì§€ì— ìƒˆ ì´ë¯¸ì§€ê°€ ìˆì„ ë•Œë§Œ ì‚¬ìš©
- ì´ì „ ëŒ€í™”ì—ì„œ ì´ë¯¸ ì´ë¯¸ì§€ ê²€ìƒ‰ì„ í–ˆë‹¤ë©´ ê·¸ ê²°ê³¼ë¥¼ í™œìš©í•˜ì„¸ìš”
- í›„ì† ì§ˆë¬¸ì€ search_restaurant_info ë“± ë‹¤ë¥¸ ë„êµ¬ ì‚¬ìš©

## ìƒˆ ì´ë¯¸ì§€ ì €ì¥ (ì¤‘ìš”!)
1. search_food_by_image í˜¸ì¶œ í›„, [ê²€ìƒ‰ ê²°ê³¼ ì´ë¯¸ì§€]ì˜ ì¸ë„¤ì¼ë“¤ê³¼ ì›ë³¸ ì´ë¯¸ì§€ë¥¼ ë¹„êµ
2. ë¹„êµ ê¸°ì¤€:
   - "ì•„ì˜ˆ ë˜‘ê°™ì€ ì´ë¯¸ì§€" ë˜ëŠ” "ì›ë³¸ì„ ìë¥¸/í¬ë¡­í•œ ì´ë¯¸ì§€" â†’ ì›¹ì— ìˆëŠ” ì´ë¯¸ì§€
   - "ë¹„ìŠ·í•´ ë³´ì´ëŠ” ë‹¤ë¥¸ ìŒì‹ ì‚¬ì§„" â†’ ìƒˆ ì´ë¯¸ì§€ (ë‹¤ë¥¸ ì‚¬ëŒì´ ì°ì€ ë¹„ìŠ·í•œ ìŒì‹)
3. ì›¹ì— ì—†ëŠ” ìƒˆ ì´ë¯¸ì§€ë©´:
   - save_food_image í˜¸ì¶œ (food_nameì€ AI ì¶”ë¡ ê°’ìœ¼ë¡œ)
   - ë°˜í™˜ëœ image_idë¥¼ ê¸°ì–µ
4. ë˜‘ê°™ê±°ë‚˜ ìë¥¸ ì´ë¯¸ì§€ê°€ ìˆìœ¼ë©´ â†’ ì €ì¥ ì•ˆí•¨

## ê²€ì¦ ì •ë³´ ì—…ë°ì´íŠ¸
- ì‚¬ìš©ìê°€ í™•ì¸í•´ì¤€ ì •ë³´ë§Œ update_food_imageë¡œ ì—…ë°ì´íŠ¸
- ìŒì‹ ì´ë¦„ í™•ì¸ â†’ food_name ì „ë‹¬ â†’ food_verified=true
- ì‹ë‹¹ ì´ë¦„ í™•ì¸ â†’ restaurant_name ì „ë‹¬ â†’ restaurant_verified=true
- ì§‘ì—ì„œ ë§Œë“  ê²½ìš°: source_type="home_cooked"
- image_idëŠ” save_food_imageì—ì„œ ë°›ì€ ê°’ ì‚¬ìš©
- ë¶€ë¶„ ê²€ì¦ ê°€ëŠ¥ (ìŒì‹ë§Œ í™•ì¸, ì‹ë‹¹ì€ ë‚˜ì¤‘ì—)

## ì‘ë‹µ í˜•ì‹
ë„êµ¬ ê²°ê³¼ì— ë‹¤ìŒ íƒœê·¸ê°€ ìˆìœ¼ë©´, ì‚¬ìš©ì ì§ˆë¬¸ì— ë”°ë¼ í•„ìš”í•  ë•Œ ì‘ë‹µì— í¬í•¨í•˜ì„¸ìš”:
- [IMAGE:url]: ìŒì‹ ì‚¬ì§„ì´ ë„ì›€ë  ë•Œ ì‘ë‹µ ì•ì— í¬í•¨
- [MAP:...]: ìœ„ì¹˜/ë§›ì§‘ ì§ˆë¬¸ì¼ ë•Œ ë„êµ¬ ê²°ê³¼ì˜ íƒœê·¸ë¥¼ ìˆ˜ì • ì—†ì´ ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ì„œ ì‘ë‹µ ëì— í¬í•¨
- ğŸ—ºï¸ ì§€ë„ ë§í¬: ì‹ë‹¹ë³„ë¡œ [ì¹´ì¹´ì˜¤ë§µ](URL) í…ìŠ¤íŠ¸ ë§í¬ë¡œ í¬í•¨
- ì¤‘ìš”: ì‘ë‹µì—ì„œ ì–¸ê¸‰í•œ ì‹ë‹¹ ê°œìˆ˜ì™€ [MAP:] íƒœê·¸ì˜ ì‹ë‹¹ ê°œìˆ˜ê°€ ë°˜ë“œì‹œ ì¼ì¹˜í•´ì•¼ í•¨
"""
```

---

## 8. í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

### 8.1 ì£¼ìš” ì»´í¬ë„ŒíŠ¸
| ì»´í¬ë„ŒíŠ¸ | íŒŒì¼ | ì—­í•  |
|----------|------|------|
| `ChatPage` | `page.tsx` | ë©”ì¸ ì±„íŒ… í˜ì´ì§€, ìƒíƒœ ê´€ë¦¬ |
| `ChatInput` | `chat-input.tsx` | ë©”ì‹œì§€ ì…ë ¥, ì´ë¯¸ì§€ ì—…ë¡œë“œ |
| `ChatMessage` | `chat-message.tsx` | ë©”ì‹œì§€ ë²„ë¸”, Markdown ë Œë”ë§ |
| `MapEmbed` | `map-embed.tsx` | ì¹´ì¹´ì˜¤ë§µ ì„ë² ë“œ, ë§ˆì»¤ í‘œì‹œ |
| `ImageGallery` | `image-gallery.tsx` | ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ |
| `RestaurantCard` | `restaurant-card.tsx` | ì‹ë‹¹ ì •ë³´ ì¹´ë“œ |

### 8.2 ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ (SSE)
```typescript
// page.tsx - ìŠ¤íŠ¸ë¦¬ë° ì´ë²¤íŠ¸ ì²˜ë¦¬
for await (const event of streamChatMessage(message, images)) {
  switch (event.type) {
    case 'tool':
      // ë„êµ¬ ì‹¤í–‰ ìƒíƒœ í‘œì‹œ ("ì´ë¯¸ì§€ë¡œ ìŒì‹ ê²€ìƒ‰ ì¤‘...")
      if (event.status === 'start') {
        setToolStatus(`${TOOL_NAMES_KR[event.tool]} ì¤‘...`);
      }
      break;

    case 'text':
      // í…ìŠ¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë° (ê¸€ì ë‹¨ìœ„ë¡œ í‘œì‹œ)
      aiContent += event.content;
      updateMessage(aiContent);
      break;

    case 'done':
      // ìµœì¢… ê²°ê³¼ (ì§€ë„ URL, ì´ë¯¸ì§€ ë“±)
      mapUrl = event.map_url;
      images = event.images;
      break;
  }
}
```

### 8.3 ì§€ë„ ë Œë”ë§ (MapEmbed)
```typescript
// [MAP:lat,lng,name|address|phone|category|url;...] íŒŒì‹±
function parseCoordinates(url: string): PlaceInfo[] {
  const parts = url.split(';');
  return parts.map(part => {
    const [lat, lng, ...infoParts] = part.split(',');
    const [name, address, phone, category, kakaoUrl] = infoParts.join(',').split('|');
    return { lat: parseFloat(lat), lng: parseFloat(lng), name, address, phone, category, kakaoUrl };
  });
}

// ì¹´ì¹´ì˜¤ë§µ ë§ˆì»¤ ìƒì„±
places.forEach((place, index) => {
  const position = new kakao.maps.LatLng(place.lat, place.lng);
  const marker = createMarkerElement(index, MARKER_COLORS[index % 3], false);
  const overlay = new kakao.maps.CustomOverlay({ position, content: marker });
  overlay.setMap(map);
});
```

---

## 9. í™˜ê²½ ì„¤ì •

### 9.1 í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ (.env)
```bash
# LLM
GOOGLE_API_KEY=your-google-api-key

# ì´ë¯¸ì§€ ê²€ìƒ‰
SERPAPI_KEY=your-serpapi-key          # Google Lens (ìš°ì„ )
SERPER_API_KEY=your-serper-api-key    # í…ìŠ¤íŠ¸ ê²€ìƒ‰ + Lens í´ë°±

# ì¹´ì¹´ì˜¤ë§µ
KAKAO_API_KEY=your-kakao-api-key

# ë°ì´í„°ë² ì´ìŠ¤
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_ANON_KEY=your-anon-key

# ëª¨ë¸ ì„¤ì • (ì„ íƒ)
MODEL_PROVIDER=gemini                  # openai ë˜ëŠ” gemini
GEMINI_MODEL=gemini-3.0-flash
```

### 9.2 Python ì˜ì¡´ì„±
```
langchain>=0.3.0
langchain-core>=0.3.0
langchain-google-genai>=2.0.0
langchain-openai>=0.2.0
langgraph>=0.2.0
fastapi>=0.115.0
uvicorn>=0.32.0
python-dotenv>=1.0.0
requests>=2.32.0
beautifulsoup4>=4.12.0
playwright>=1.48.0
supabase>=2.0.0
Pillow>=10.0.0
nest-asyncio>=1.6.0
```

### 9.3 ì‹¤í–‰ ë°©ë²•
```bash
# 1. ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# 2. Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜
playwright install chromium

# 3. ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰
python -m uvicorn api.main:app --reload --port 8000

# 4. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ (ë³„ë„ í„°ë¯¸ë„)
cd frontend/app && npm run dev

# ë˜ëŠ” í•œë²ˆì— ì‹¤í–‰
./run_all.sh
```

---

## 10. API ëª…ì„¸

### 10.1 POST /chat (ë™ê¸°)
**ìš”ì²­:**
```bash
curl -X POST http://localhost:8000/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "ê°•ë‚¨ì—­ ë§›ì§‘ ì¶”ì²œí•´ì¤˜",
    "session_id": "optional-session-id",
    "images": [{"data": "base64...", "mime_type": "image/jpeg"}]
  }'
```

**ì‘ë‹µ:**
```json
{
  "response": "ê°•ë‚¨ì—­ ë§›ì§‘ 3ê³³ ì¶”ì²œë“œë ¤ìš”! ...",
  "session_id": "abc-123",
  "map_url": "37.497,127.028,...",
  "images": []
}
```

### 10.2 POST /chat/stream (SSE)
**ì‘ë‹µ í˜•ì‹:**
```
data: {"type": "session", "session_id": "abc-123"}
data: {"type": "tool", "tool": "search_restaurant_info", "status": "start"}
data: {"type": "tool", "tool": "search_restaurant_info", "status": "done"}
data: {"type": "text", "content": "ê°•ë‚¨ì—­"}
data: {"type": "text", "content": " ë§›ì§‘"}
...
data: {"type": "done", "map_url": "37.497,127.028,...", "images": []}
```

### 10.3 POST /session/clear
**ìš”ì²­:**
```bash
curl -X POST "http://localhost:8000/session/clear?session_id=abc-123"
```

### 10.4 DELETE /session/{session_id}
**ìš”ì²­:**
```bash
curl -X DELETE http://localhost:8000/session/abc-123
```

---

## 11. ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼

### 11.1 ë„êµ¬ë³„ ì‘ë‹µ ì‹œê°„
| ë„êµ¬ | ì¸¡ì •ê°’ | êµ¬ì„± |
|------|--------|------|
| search_food_by_image | 3-5ì´ˆ | ì—…ë¡œë“œ 1-2ì´ˆ + API 2-3ì´ˆ |
| search_restaurant_info | 5-6ì´ˆ | Kakao API 0.5ì´ˆ + Playwright 5ì´ˆ |
| search_recipe_online | 1.5-2ì´ˆ | Serper 0.5ì´ˆ + í¬ë¡¤ë§ 1-1.5ì´ˆ |
| get_restaurant_reviews | 8-15ì´ˆ | Playwright ì „ì²´ |
| get_nutrition_info | 2ì´ˆ | Serper 0.5ì´ˆ + í¬ë¡¤ë§ 1.5ì´ˆ |
| save_food_image | 0.4ì´ˆ | Supabase INSERT |
| update_food_image | 0.08ì´ˆ | Supabase UPDATE |

### 11.2 E2E ì‘ë‹µ ì‹œê°„ (ì „ì²´ ì›Œí¬í”Œë¡œìš°)
| ì‹œë‚˜ë¦¬ì˜¤ | í‰ê·  ì‹œê°„ |
|----------|----------|
| ì´ë¯¸ì§€ ì¸ì‹ + DB ì €ì¥ | 5-6ì´ˆ |
| ì‹ë‹¹ ê²€ìƒ‰ + ì§€ë„ | 6-7ì´ˆ |
| ë ˆì‹œí”¼ ê²€ìƒ‰ | 3-4ì´ˆ |
| í›„ê¸° ê²€ìƒ‰ | 10-16ì´ˆ |

---

## 12. í–¥í›„ ê°œì„  ë°©í–¥

### 12.1 ë‹¨ê¸° ê°œì„ 
- [ ] Redis ìºì‹± (ì‹ë‹¹ ì •ë³´, ë©”ë‰´)
- [ ] ë„êµ¬ ë³‘ë ¬ ì‹¤í–‰
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”

### 12.2 ì¤‘ê¸° ê°œì„ 
- [ ] ë²¡í„° DB í†µí•© (ì´ì „ ê²€ìƒ‰ ê²°ê³¼ ì‹œë§¨í‹± ê²€ìƒ‰)
- [ ] ì´ë¯¸ì§€ ì„ë² ë”© (CLIP ëª¨ë¸)
- [ ] ë©€í‹°ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜

### 12.3 ì¥ê¸° ê°œì„ 
- [ ] ìŒì„± ì¸ì‹ í†µí•©
- [ ] ì‹¤ì‹œê°„ ì˜ˆì•½ ê¸°ëŠ¥
- [ ] ê°œì¸í™” ì¶”ì²œ ì‹œìŠ¤í…œ

---

## ì°¸ê³  ìë£Œ

- [LangGraph ê³µì‹ ë¬¸ì„œ](https://langchain-ai.github.io/langgraph/)
- [LangChain Tools ë¬¸ì„œ](https://python.langchain.com/docs/concepts/tools/)
- [Gemini API ë¬¸ì„œ](https://ai.google.dev/docs)
- [Kakao Map API](https://developers.kakao.com/docs/latest/ko/local/dev-guide)
- [Supabase ë¬¸ì„œ](https://supabase.com/docs)
- [Playwright ë¬¸ì„œ](https://playwright.dev/python/docs/intro)
